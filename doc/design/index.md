金字塔原理

是什么  
金字塔原理是一种组织思路的原则，可以保证思路简单清晰有条理，论证严谨缜密无破绽。它包含一种思路展开的基本方法，和一系列与之配套的原则。  
阐述一件事情，归纳一个中心论点，由三至七个论据支持。一级论据本身也可以是一个论点，被二级的三至七个论据支持，如此延伸。  
金字塔原理阐述思考过程的组织原理。在程序设计中是一种自顶向下设计。

为什么  
有效：符合人类认知特点。  
重要：减少思考时需要考虑的因素数目，大大提升思考效率。  

怎么做  
结论先行-由上统下-分组归类-逻辑递进  

结论先行  
TOPS原则：Target to Audiences, 有的放矢，目标明确；Over Arching, 贯穿整体，围绕一个问题展开；Powerful, 掷地有声，方案有效；Supportable 言之有据，方案有依据  
SCQA法则：Situation, 给定的场景下；Complication, 有冲突；Question, 存在疑问；Answer, 回答和结论  

由上统下  
上层概括下层：下层所有观点都是为了论证上层观点成立而罗列的，不存在无关观点。  
结论先行：解说问题前，先把结论描述清楚。  

分组归类  
同层独立穷尽：MECE (Mutually exclusive and collectively exhaustive)  
同层四种关系：结构（空间顺序），时间，重要性（首先，其次，再次...最后），演绎（大前提，小前提，结论）  
每层三至七个主题：不宜过多也不宜多少  

逻辑递进  
先重要后次要，先总结后具体，先框架后细节，先结论后原因，先结果后过程，先论点后论据





第一性原理
做一件事情的最根本的原则，然后以此为参照点为自己纠偏。
以最高的效率消除复杂性带来的风险。

一条基本原则：需求，风险
两个分析过程：需求分析过程，风险分析过程
三种纠偏活动：沟通，检视，评审

基于风险驱动的设计方法，在设计的时候，牢牢盯住需求，紧紧抓住风险，为每一个风险去寻找解决方案。




软件设计三步法
1.整理需求，确定目标。功能需求，性能需求，实现需求
2.构思方案，风险分析。
3.敲定细节。





模块设计四阶段
准备阶段（准备）：沟通确认对模块的期望，模块目标是什么；产出特性列表，分为两类描述，需求和约束。
分析阶段（分析，风险清晰？）：分析需求，提出设计要求；产出风险分析结果，对需求约束进行标注，按重要性，难度，风险等维度划分级别。
选型阶段（构思，检视，风险消除？）：构思实现方案，包括结构和逻辑；产出模块接口图，数据结构图，逻辑视图。审视构思方案可行性或优化方案，选出最佳方案；产出决策表。
细化阶段（细化，任务明确？）：对方案进行细化，明确任务；产出任务分解表，API定义列表，数据结构定义。





需求分析
看清需求：1. 挖掘需求的真相，2. 拔高看问题的角度（更高的层面，更广的宽度，更长的时间，关注设计干系人）
梳理关键：做调查，定策略，产出需求点列表。（需求点，场景，性能，资源消耗，对外接口，设计约束，软件开发的全生命周期，软件用户的全生命周期，大概率的未来需求变化）  





建模
效果，成本，风险
建模的过程采用自顶向下，逐步求精的**金字塔结构**来思考问题解决方案。
以计算机系统的视角来进行设计，从结构，逻辑，数据三个维度思考系统的运作模型。采用**三视图方法**，即结构视图，逻辑视图，数据视图。

结构视图
常用的划分层次：交互层，业务层，引擎层，IO层
标志：高内聚、低耦合。
目的：分而治之

逻辑视图
从实现逻辑的角度考虑，对外交付功能的API的实现。
采用流程图，时序图，状态图，数据流图来辅助思考以及记录思考结果。

数据视图
常常使用数据流图(dfd:Data Flow Diagram)来进行分析、描述。





拆分
好的拆分：完备性，清晰性，高效性，适应性，低依赖

拆分方法：
垂直拆分，即切块，目的是让问题规模变小。拆分后的模块具有丰富的功能，内部也需要多工种配合，适合考核结果。
水平拆分，即分层，目的是让问题更单纯。拆分后的任务内容比较简单，往往只涉及单一工种，适合考核过程。
综合应用，垂直和水平拆分综合起来一起应用。

拆分步骤：
1.整体分析，给出方案
2.分析方案特点，团队特性，选择合适拆分方法
3.制定职责边界，定义交付物





方案选型
对初步方案的可行性和风险性进行分析，存在风险的方案需要给出备选方案。方案选型会议讨论后最终定案。
采用决策表进行分析，展现，对比多个方案之间的优劣势，找到最合适的解决方案。

决策方法：打分法，对比法





决策
确定性的问题：事件的发展是稳定的，可以预测的，最终可以转化为数学问题，通过解方程的方式求得最优解。
概率性的问题：事件发展不那么稳定，有一定不确定性，但在一个可确定的概率范围里。
1.增加额外措施，消除或控制方案带来的额外风险
2.转嫁风险
3.忽略风险，任其演化为成本
不确定性问题：由于信息的缺失，方案的粗陋，计算的复杂，导致无法预知事物的未来状态，引起的难以决策的问题。
1.缺乏必要信息导致无法分析
2.缺少方法导致评估维度不清晰
3.问题相互干扰难以评估

使用调查，评估，推演，预言，分析等方法，收集影响到拒测的所有关键信息。
使用可操作强的方法把不确定性因素转为确定性因素。
把所有影响决策的因素转换到同一个维度进行比较，这个比较维度通常是成本收益。

决策之难，对于信息不够充分条件下，如何决策
拔高视角，找准衡量标准
制定原则，简化决策难度
推演结果，避免事与愿违
放弃最优，效果满意就行

方案选型步骤
背景梳理，问题定义。搞清楚要解决的真正问题
梳理决策维度。搞清楚哪几个维度是关键因素，决定了当前设计是否成功。
梳理方案在各个维度的优缺点。尽可能做到全面，客观。
召集会议，对各个方案进行分析和发散。尽可能全面的评估各个方案的优缺点。
决策，选定方案
对选定方案进行加工，消除方案确定带来的负面影响，规避风险

选型之前
预先设定全面，可衡量，有挑战性的目标
找同行探讨方案





结构设计
前提 需求分析梳理
入手 结构设计的三种基本思路
1.聚焦数据结构
2.聚焦对象模型
3.聚焦业务逻辑
成型 根据需求选择合适的结构
深入 分析梳理，对结构进行细化和调整
定型 整理产出

模块划分方法：按逻辑划分，按时间划分，按过程划分，按通讯划分，按职能划分





解耦（27）





流程设计
关注控制流的变化（流程图）
关注数据流的变化（数据流图）
关注对象状态的变化（状态图）
关注对象之间的协作（序列图）
关注算法或数据结构的逻辑（各种示意图）

关键点：输入的定义，输出的定义，检查点





API设计
API设计的原则：简约，一致性，低耦合
文档的重要性
API思维模式
标准化：命名
数据结构
兼容性





可靠性（16）
可靠性，健壮性，安全性，稳定性，可用性
服务等级协议：服务可用性，数据可用性（RTO复原时间目标,RPO复原点目标），数据安全性
问题：整体可靠不要求所有组件可靠，可靠性高的组件可能受可靠性低组件的影响

可靠性分析：
需求分析，识别业务需要的可靠性要求
设计分析，设别模块的可靠性要求 
设计分析，识别模块间的可靠性依赖

可靠性设计原则：
降低实现者的心智负担
高要求高保证，低要求低保证
隔离可靠性要求不同的组件之间的相互影响（数据，资源，权限，环境）
不要信任低可靠性模块的保证
在模块间构建防火墙，对模块间的通讯进行过滤

怎么提升机制的可靠性：
冗余，重试，解耦+备用方案，脱敏，校验，检查，过滤，演练，换用更高可靠性的组件，提升流程可靠性，提升数据可靠性





可调试性